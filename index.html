<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<title>گردونه شانس همیشه منفی 100</title>
<style>
  body {
    background: #222;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 40px;
    user-select: none;
  }
  #wheel-container {
    margin: 20px auto;
    position: relative;
    width: 320px;
    height: 320px;
  }
  svg {
    width: 320px;
    height: 320px;
    transform: rotate(0deg);
    transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
  }
  text {
    font-weight: bold;
    fill: white;
    font-size: 22px;
    pointer-events: none;
  }
  #pointer {
    width: 0; 
    height: 0; 
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-bottom: 40px solid #e74c3c;
    margin: 0 auto;
    margin-top: -20px;
  }
  #spinBtn {
    margin-top: 30px;
    padding: 14px 40px;
    background-color: #0088cc;
    border: none;
    border-radius: 12px;
    color: white;
    font-size: 22px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  #spinBtn:hover {
    background-color: #005f7a;
  }
  #result {
    margin-top: 30px;
    font-size: 28px;
    font-weight: bold;
    min-height: 40px;
  }
</style>
</head>
<body>

<h1>گردونه شانس</h1>

<div id="wheel-container">
  <svg id="wheel" viewBox="0 0 320 320" xmlns="http://www.w3.org/2000/svg" >
    <g transform="translate(160,160)">
      <!-- 4 slices, each 90deg -->
      <path d="M0 0 L160 0 A160 160 0 0 1 0 160 Z" fill="#1abc9c" />
      <path d="M0 0 L0 160 A160 160 0 0 1 -160 0 Z" fill="#3498db" />
      <path d="M0 0 L-160 0 A160 160 0 0 1 0 -160 Z" fill="#9b59b6" />
      <path d="M0 0 L0 -160 A160 160 0 0 1 160 0 Z" fill="#e74c3c" />
      <!-- Texts -->
      <text x="80" y="30" text-anchor="middle" dominant-baseline="middle" transform="rotate(45)">+۵۰۰</text>
      <text x="-30" y="80" text-anchor="middle" dominant-baseline="middle" transform="rotate(135)">+۲۰۰</text>
      <text x="-80" y="-30" text-anchor="middle" dominant-baseline="middle" transform="rotate(-135)">+۳۰۰</text>
      <text x="30" y="-80" text-anchor="middle" dominant-baseline="middle" transform="rotate(-45)">-۱۰۰</text>
    </g>
  </svg>
</div>

<div id="pointer"></div>

<button id="spinBtn">بچرخون</button>

<div id="result"></div>

<script>
  const wheel = document.getElementById('wheel');
  const spinBtn = document.getElementById('spinBtn');
  const result = document.getElementById('result');

  // چون میخوای همیشه منفی 100 باشه، اندیس اون قسمت 3 هست (از 0 شروع میشه)
  const negativeIndex = 3;
  const segmentCount = 4;
  let currentRotation = 0;

  spinBtn.addEventListener('click', () => {
    spinBtn.disabled = true;
    result.textContent = '';

    const spins = Math.floor(Math.random() * 3) + 4; // چرخش بین 4 تا 6 دور
    const segmentAngle = 360 / segmentCount;
    // زاویه برای رسیدن به -100
    const finalRotation = spins * 360 + (360 - (negativeIndex * segmentAngle + segmentAngle/2));
    currentRotation += finalRotation;

    wheel.style.transition = 'transform 4s cubic-bezier(0.33, 1, 0.68, 1)';
    wheel.style.transform = `rotate(${currentRotation}deg)`;

    wheel.addEventListener('transitionend', () => {
      spinBtn.disabled = false;
      result.textContent = `نتیجه: -۱۰۰`;
    }, { once: true });
  });
</script>

</body>
</html>